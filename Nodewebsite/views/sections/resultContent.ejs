<div id="page-container">

  <div class="resultsPageTopComponent">
    <h5 style="text-align: center; margin-top: 5px;">
      Staphlyococcus Aureus <br>
      </h5>

    <h1 style="text-align: center; margin-top: -10px;">
      Sample: <% sample_metadata.forEach(function (result_sample_metadata) { %>
         <%= result_sample_metadata.sample_id %> <% }) %></h1>
    <hr style="width: 65%; margin-top: -2px"></hr>
    <h4 style="text-align: center"> Summary </h4>
    <p class="summaryInfo" style="text-align: left; margin-left: 20%">
      <b>Assembly Level:</b> Complete Genome
      <br>
        <b>HUMAN PATHOGEN</b>
        <br>
          <b>Morphology:</b> Gram: Positive, Shape: Cocci, Motility: No
          <br>
            <b>Environment:</b>	OxygenReq: Facultative, Optimum Temperature: 30-37, Temperature Range: Mesophilic, Habitat: HostAssociated
          </p>
    <hr style="width: 65%">

    </hr>
    <h3 style="text-align: center"> Sample Information </h3>
  </div>

  <div id="resultsPageRightComponent">

    <div class="tab">
      <!--need to change the titles for these once finalised-->
      <button class="tablinks" onclick="resultsTabs(event, 'Tags')" title="This displays a table of tags in your selected genome">Tags</button>
      <button class="tablinks" onclick="resultsTabs(event, 'Metadata')" title="This displays how the results were chosen">Metadata</button>
      <button class="tablinks" onclick="resultsTabs(event, 'MLST')" title="This displays what the colours and thickness of the edges mean">MLST</button>
      <button class="tablinks" onclick="resultsTabs(event, 'Settings')" title="This provides users with different options to filter their genomic neighbourhood">Settings</button>
      <button class="tablinks" onclick="resultsTabs(event, 'Export')" title="This provides users with a way to save the data locally">Export</button>
    </div>

    <div id="Tags" class="tabcontent">
      <table style="width: 100%;">
        <% tag_tag.forEach(function (result_tag_tag) { %>
        <tr>
          <td >Tag:</td>
          <td >
            <%= result_tag_tag.tag %>
          </td>
        </tr>
        <tr>
          <td >Comment:</td>
          <td >
            <%= result_tag_tag.comment %>
          </td>
        </tr>
        <% }) %>
      </table>
    </div>

    <div id="Metadata" class="tabcontent">
      <% include ../snippets/resultMetadata %>
    </div>

    <div id="MLST" class="tabcontent">
      <table style="width: 100%;">
        <% mlst_mlst.forEach(function (result_mlst_mlst) { %>
        <tr>
          <td >st:</td>
          <td >
            <%= result_mlst_mlst.st %>
          </td>
        </tr>
        <tr>
          <td >ariba:</td>
          <td >
            <%= result_mlst_mlst.ariba %>
          </td>
        </tr>
        <tr>
          <td >mentalist:</td>
          <td >
            <%= result_mlst_mlst.mentalist %>
          </td>
        </tr>
        <tr>
          <td >BLAST:</td>
          <td >
            <%= result_mlst_mlst.blast %>
          </td>
        </tr>
        <% }) %>
      </table>
    </div>

    <div id="Settings" class="tabcontent">
      <h3>link to settings doc</h3>
    </div>

    <div id="Export" class="tabcontent">
      <h3>link to export doc</h3>
    </div>
  </div>

  <div id="resultsPageLeftComponents">
    <div id="resultsPageLeftComponent1">
      <h6 id="displayDescription">Functional network of related genomes and genomic interaction</h6>
    </div>
    <!-- close resultsPageLeftComponent1 -->

    <div id="resultsPageLeftComponent2">
      <div id="interactiveGraph">
        <button type="button" id="centerGraph" onclick="centerGraph()" title="Center graph" class="btn btn-outline-dark btn-sm">
          <i class="fas fa-expand" style="font-size:20px; padding-left: 20px; padding-right: 20px;"></i>
        </button>
        <a href="#saveableGraphImage" id="downloadGraph" onclick="downloadGraph()" title="Create .png file of current graph" class="btn btn-outline-dark btn-sm">
          <i class="far fa-file-image" style="font-size:20px; padding-left: 20px; padding-right: 20px;"></i>
        </a>
        <button type="button" id="favouriteSample" onclick="favouriteSample()"  title="Favourite sample" class="btn btn-outline-dark btn-sm">
          <i class="far fa-star" style="font-size:20px; padding-left: 20px; padding-right: 20px;"></i>
        </button>
        <button type="button" id="zoomInGraph" onclick="zoomInGraph()" title="Zoom in on graph" class="btn btn-outline-dark btn-sm">
          <i class="fa fa-search-plus" style="font-size:20px; padding-left: 20px; padding-right: 20px;"></i>
        </button>
        <button type="button" id="zoomOutGraph" onclick="zoomOutGraph()" title="Zoom out on graph" class="btn btn-outline-dark btn-sm">
          <i class="fa fa-search-minus" style="font-size:20px; padding-left: 20px; padding-right: 20px;"></i>
        </button>
        <a href="#interactiveGraph" id="expandGraph" onclick="expandGraph()" title="Make graph full screen" class="btn btn-outline-dark btn-sm">
          <i class="far fa-plus-square" style="font-size:20px; padding-left: 20px; padding-right: 20px;"></i>
        </a>
        <a href="#interactiveGraph" id="reduceGraph" onclick="reduceGraph()" title="Make graph full screen" class="btn btn-outline-dark btn-sm">
          <i class="far fa-minus-square" style="font-size:20px; padding-left: 20px; padding-right: 20px;"></i>
        </a>

        <hr class="divider" style="border-color: white"></hr>
        <hr class="divider" style="border-color: white"></hr>

        <hr class="divider"></hr>

      </div>
      <div id="cy"></div>
      <hr class="divider" style="border-color: white"></hr>
      <hr class="divider"></hr>

    </div>
    <!-- close resultsPageLeftComponent2 -->


    <div id="resultsPageLeftComponent3" style="text-align: center;">
      <div class="weightedDistanceSliders" style="padding-top:15px; float: left; border-left: 0.5px solid silver;">
        <p>Weighted distance 1</p>
        <input type="range" min="1" max="100" value="50" class="slider" id="myRange" style="width: 70%; "></input>

      </div>

      <div class="weightedDistanceSliders" style="padding-top:15px; float: left; border-right: 0.5px solid silver;">

        <p >Weighted distance 2</p>
        <input type="range" min="1" max="100" value="50" class="slider" id="myRange" style="width: 70%; "></input>

      </div>

    </div>
    <!-- close resultsPageLeftComponent3 -->
  </div>
  <!-- close resultsPageResultComponents -->

  <img id="saveableGraphImage" style="border: 1px solid #ddd; min-width: 3em; min-height: 3em; float: left; visibility: hidden;"></img>

  <script>
    <!-- sampleTab buttons functionality -->
    function resultsTabs(evt, tabName) {

    var i, tabcontent, tablinks;
    tabcontent = document.getElementsByClassName("tabcontent");
    for (i = 0; i < tabcontent.length; i++) {
            tabcontent[i].style.display = "none";
          }
          tablinks = document.getElementsByClassName("tablinks");
          for (i = 0; i < tablinks.length; i++) {
            tablinks[i].className = tablinks[i].className.replace(" active", "");
          }
          document.getElementById(tabName).style.display = "block";
          evt.currentTarget.className += " active";
      }

        <!-- cytoscape div -->

    var sampleIdentity = <%- JSON.stringify(sample_ID) %>
      ;
      console.log(sampleIdentity);
      var cy = cytoscape({
      container: document.getElementById('cy'),
      elements: [
      // nodes
      { data: { id: sampleIdentity } }
      ],
      style: [
      {
      selector: 'node',
      style: {
      'background-color': '#468e94',
      label: 'data(id)'
      }
      }],
      });
      for (var i = 0; i < 10; i++) {
                            cy.add({
                            data: { id: 'Neighbour' + i }
                        }
                    );
                    var source = 'Neighbour' + i;
                    cy.add({
                        data: {
                            id: 'edge' + i,
                            source: source,
                            target: (sampleIdentity)
                        }
                    });
                }
                cy.layout({
                    name: 'cola'
                }).run();
            


      <!-- /// -->
      <!-- SCRIPTS FOR CYTOSCAPE GRAPH BUTTONS -->
      <!-- /// -->

      <!-- Global variables for cytoscape graph buttons -->
      var zoomAmount = 1;
      var newZoom;

      <!-- zoomInGraph functionality-->
      function zoomInGraph() {
      console.log("ZOOM IN - "+zoomAmount);
      zoomAmount = zoomAmount + 0.25;
      newZoom = zoomAmount;
      console.log("IN - "+newZoom);

      cy.zoom({level: newZoom});

      }

      <!-- zoomOutGraph functionality-->
      function zoomOutGraph() {
      console.log("ZOOM OUT - "+zoomAmount);

      zoomAmount = zoomAmount - 0.25;
      newZoom = zoomAmount;
      console.log("OUT - "+newZoom);

      cy.zoom({level: newZoom});

      }

      <!-- downloadGraph functionality-->
      function downloadGraph() {
      console.log("download graph");

      document.getElementById("saveableGraphImage").style.visibility="visible";
      var png64 = cy.png();

      document.getElementById("saveableGraphImage").src="" + png64;

      }

      <!-- center graph functionality-->

      function centerGraph() {
      zoomAmount = 1;
      newZoom = 1;

      cy.center();
      cy.reset();

      }

      <!-- expandGraph functionality-->
      function expandGraph() {
      var windowHeight = window.innerHeight;
      var screenHeight = windowHeight + 30;
      var graphHeight = windowHeight - 60;

      <!-- make right (tabular) components move above genome graph components-->
      document.getElementById("resultsPageRightComponent").style.float= "left";
      document.getElementById("resultsPageRightComponent").style.width= "100%";
      document.getElementById("resultsPageRightComponent").style.padding= "0px 0px 10px 0px";

      <!-- make genome graph div container component full width and height of screen -->
      document.getElementById("resultsPageLeftComponents").style.width= "100%";
      document.getElementById("resultsPageLeftComponents").style.height= screenHeight + "px";
      document.getElementById("resultsPageLeftComponents").style.clear= "both";
      document.getElementById("resultsPageLeftComponents").style.padding= "0px";

      <!-- specifically make genome graph component full width and height of screen -->
      document.getElementById("resultsPageLeftComponent2").style.height= screenHeight + "px";
      document.getElementById("resultsPageLeftComponent2").style.padding= "0 0 10px 0";
      document.getElementById("resultsPageLeftComponent2").style.width= "80%";


      <!-- make genome sliders to right of graph -->
      document.getElementById("resultsPageLeftComponent3").style.width= "20%";
      document.getElementById("resultsPageLeftComponent3").style.margin="70px 0 0 0";

      <!-- specifically modify cytoscape graph -->
      document.getElementById("cy").style.width= "100%";
      document.getElementById("cy").style.height= graphHeight + "px";

      <!-- specifically make sliders stack under each other on RHS of graph -->
      var elements = document.getElementsByClassName("weightedDistanceSliders");
      for (var i = 0; i < elements.length; i++) {
          elements[i].style.width="90%";
        }

        centerGraph();

        }


        <!-- reduce/minimize graph size functionality -->
      function reduceGraph() {

      var windowHeight = window.innerHeight;
      var screenHeight = windowHeight + 30;
      var graphHeight = windowHeight - 60;

      <!-- make right (tabular) components move above genome graph components-->
      document.getElementById("resultsPageRightComponent").style.float= "right";
      document.getElementById("resultsPageRightComponent").style.width= "45%";
      document.getElementById("resultsPageRightComponent").style.padding= "0px 10px 20px 0px";

      <!-- make genome graph div container component full width and height of screen -->
      document.getElementById("resultsPageLeftComponents").style.width= "55%";
      document.getElementById("resultsPageLeftComponents").style.height= "auto";
      document.getElementById("resultsPageLeftComponents").style.clear= "none";
      document.getElementById("resultsPageLeftComponents").style.padding= "0px 2px 0px 0px";

      <!-- specifically make genome graph component full width and height of screen -->
      document.getElementById("resultsPageLeftComponent2").style.height= "380px";
      document.getElementById("resultsPageLeftComponent2").style.padding= "0 0 10px 0";
      document.getElementById("resultsPageLeftComponent2").style.width= "100%";


      <!-- make genome sliders to right of graph -->
      document.getElementById("resultsPageLeftComponent3").style.width= "100%";
      document.getElementById("resultsPageLeftComponent3").style.margin="0px 0px 0px 0px";

      <!-- specifically modify cytoscape graph -->
      document.getElementById("cy").style.width= "inherit";
      document.getElementById("cy").style.height= "90%";

      <!-- specifically make sliders stack under each other on RHS of graph -->
      var elements = document.getElementsByClassName("weightedDistanceSliders");
      for (var i = 0; i < elements.length; i++) {
          elements[i].style.width="50%";
        }

        centerGraph();

      }
      
  </script>


